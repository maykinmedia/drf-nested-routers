[tox]
envlist =
       py{38,39,310}-django{32}-drf{3.11,3.12}
       py{38,39,310,311}-django{41,42}-drf{3.14}

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310
    3.11: py311

[testenv]
commands = ./runtests.py --nolint
allowlist_externals = *
setenv =
       PYTHONDONTWRITEBYTECODE=1
deps =
       django3.2: Django~=3.2.0
       django4.1: Django~=4.1.0
       django4.2: Django~=4.2.0
       drf3.11: djangorestframework~=3.11.0
       drf3.12: djangorestframework~=3.12.0
       drf3.13: djangorestframework~=3.13.0
       drf3.14: djangorestframework~=3.14.0
       -rrequirements-tox.txt

[testenv:py39-flake8]
commands = ./runtests.py --lintonly
deps =
       -rrequirements-tox.txt

[testenv:py39-docs]
commands = mkdocs build
deps =
       mkdocs>=1.3.0